(function(e){function t(t){for(var o,i,c=t[0],s=t[1],u=t[2],f=0,l=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&l.push(r[i][0]),r[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);d&&d(t);while(l.length)l.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={app:0},r={app:0},a=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d0c8e41":"97b5410f","chunk-c308d21e":"ecc7942f","chunk-fbedd1f8":"13cf0591"}[e]+".js"}function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-c308d21e":1,"chunk-fbedd1f8":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-2d0c8e41":"31d6cfe0","chunk-c308d21e":"e97a4b84","chunk-fbedd1f8":"e552f584"}[e]+".css",r=s.p+o,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var u=a[c],f=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(f===o||f===r))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){u=l[c],f=u.getAttribute("data-href");if(f===o||f===r)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var o=t&&t.target&&t.target.src||r,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete i[e],d.parentNode.removeChild(d),n(a)},d.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){i[e]=0})));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,n){o=r[e]=[t,n]}));t.push(o[2]=a);var u,f=document.createElement("script");f.charset="utf-8",f.timeout=120,s.nc&&f.setAttribute("nonce",s.nc),f.src=c(e);var l=new Error;u=function(t){f.onerror=f.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,n[1](l)}r[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:f})}),12e4);f.onerror=f.onload=u,document.head.appendChild(f)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/static/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],f=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=f;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("4160"),n("b64b"),n("159b"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=n("2f62"),r=n("bc3a"),a=n.n(r),c=n("a7fe"),s=n.n(c),u=n("9062"),f=n.n(u),l=n("ecee"),d=n("ad3d"),m=n("f2d1"),_=n("7bb1"),p=n("60d4"),g=n("4c93"),h=(n("e40d"),n("77ed")),E=n.n(h),S=(n("4989"),n("d3b7"),n("8c4f"));o["a"].use(S["a"]);var v=new S["a"]({routes:[{path:"/login",name:"Login",component:function(){return n.e("chunk-2d0c8e41").then(n.bind(null,"578a"))}},{path:"/menu",name:"Menu",component:function(){return n.e("chunk-fbedd1f8").then(n.bind(null,"add6"))}},{path:"/404",name:"Page_404",component:function(){return n.e("chunk-c308d21e").then(n.bind(null,"9303"))}},{path:"*",name:"Unknow",redirect:{name:"Login"}}]});n("a434"),n("ac1f"),n("25f0"),n("3ca3"),n("5319"),n("ddb0"),n("2b3d");function O(){var e=Date.now();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}o["a"].use(i["a"]);var b=new i["a"].Store({state:{is_loading:!0,is_loggedin:!1,liff_context:null,user_profile:null,gid:"",uid:"",records:null,current_goods:[],order_status:"empty",messages:[]},actions:{set_is_loading:function(e,t){e.commit("SET_IS_LOADING",t)},set_is_loggedin:function(e,t){e.commit("SET_IS_LOGGEDIN",t)},set_gid:function(e,t){e.commit("SET_GID",t)},set_order_status:function(e,t){e.commit("SET_ORDER_STATUS",t)},add_good:function(e,t){t.id=O(),e.commit("ADD_GOOD",t)},remove_good:function(e,t){e.commit("REMOVE_GOOD",t)},goods_same_as:function(e,t){e.commit("GOODS_SAME_AS",t)},remove_all_goods:function(e){e.commit("REMOVE_ALL_GOODS")},add_message:function(e,t){var n=O();e.commit("ADD_MESSAGE",{message:t.message,status:t.status,timestamp:n});var o=this;setTimeout((function(){o.state.messages.forEach((function(t,o){t.timestamp===n&&e.commit("REMOVE_MESSAGE",o)}))}),5e3)},remove_message:function(e,t){e.commit("REMOVE_MESSAGE",t)},get_liff_context:function(e){e.commit("GET_LIFF_CONTEXT",window.liff.getContext()),null!==this.state.liff_context&&this.state.liff_context.hasOwnProperty("groupId")&&e.commit("SET_GID",this.state.liff_context.groupId),""===this.state.gid&&e.commit("SET_GID","test")},get_user_profile:function(e){window.liff.getProfile().then((function(t){e.commit("GET_USER_PROFILE",{display_name:t.displayName,photo_url:t.pictureUrl}),e.commit("SET_UID",t.userId)})).catch((function(e){console.log("error",e)}))},get_records:function(e){var t=this,n="https://only-test-0001.herokuapp.com/api/v1/",o=new URL(String(t.state.gid)+"/orders",n).toString();e.commit("SET_IS_LOADING",!0),a.a.get(o).then((function(n){var o=t.state.uid;e.commit("GET_RECORDS",n.data),n.data.hasOwnProperty(t.state.uid)&&(e.commit("SET_ORDER_STATUS","exist"),e.commit("SET_GOODS",n.data[o].goods)),e.commit("SET_IS_LOADING",!1)})).catch((function(t){console.log(t),e.commit("SET_IS_LOADING",!1)}))}},mutations:{SET_IS_LOADING:function(e,t){e.is_loading=t},SET_IS_LOGGEDIN:function(e,t){e.is_loggedin=t},SET_UID:function(e,t){e.uid=t},SET_GID:function(e,t){e.gid=t},SET_ORDER_STATUS:function(e,t){e.order_status=t},ADD_GOOD:function(e,t){e.current_goods.push(t)},REMOVE_GOOD:function(e,t){e.current_goods.forEach((function(n,o){n.id===t&&e.current_goods.splice(o,1)}))},SET_GOODS:function(e,t){e.current_goods=t},GOODS_SAME_AS:function(e,t){e.current_goods.splice(0,e.current_goods.length),t.forEach((function(t){t.id=O(),e.current_goods.push(t)}))},REMOVE_ALL_GOODS:function(e){e.current_goods.splice(0,e.current_goods.length)},ADD_MESSAGE:function(e,t){e.messages.push({message:t.message,status:t.status,timestamp:t.timestamp})},REMOVE_MESSAGE:function(e,t){e.messages.splice(t,1)},GET_LIFF_CONTEXT:function(e,t){e.liff_context=t},GET_USER_PROFILE:function(e,t){e.user_profile=t},GET_RECORDS:function(e,t){e.records=t}}}),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container mt-3",attrs:{id:"app"}},[n("Alert",{attrs:{id:"msg",msg:"Ops~",state:"alert-danger"}}),e.initialized?n("router-view"):n("loading",{attrs:{loader:"dots",active:e.api_loading,"can-cancel":!1,"is-full-page":!1},on:{"update:active":function(t){e.api_loading=t}}})],1)},T=[],y=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-alert"},e._l(e.messages,(function(t,o){return n("div",{key:o,staticClass:"alert alert-dismissible",class:"alert-"+t.status},[e._v(" "+e._s(t.message)+" "),n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return e.removeMessage(o)}}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])])})),0)}),D=[],G={name:"Alert",computed:{messages:function(){return this.$store.state.messages}},methods:{removeMessage:function(e){this.$store.dispatch("remove_message",e)}}},w=G,A=(n("82d5"),n("2877")),I=Object(A["a"])(w,y,D,!1,null,null,null),L=I.exports,M={name:"app",components:{Alert:L},data:function(){return{initialized:!1}},created:function(){console.log(this.$options.name,"created"),console.log("process.env.NODE_ENV: ".concat("production")),console.log("process.env.VUE_APP_LIFF_ID: ".concat("1602541695-bYKBPBe6")),this.init_liff()},BeforeMount:function(){console.log(this.$options.name,"BeforeMount")},beforeDestroy:function(){console.log(this.$options.name,"BeforeMount"),this.$liff.logout()},computed:{api_loading:function(){return this.$store.state.is_loading}},methods:{init_liff:function(){var e=this;e.$liff.init({liffId:"1602541695-bYKBPBe6"},(function(){e.$store.dispatch("get_liff_context"),e.$store.dispatch("set_is_loading",!1),e.initialized=!0}),(function(e){console.log("LIFF initialization failed",e)}))}}},k=M,R=(n("5c0b"),Object(A["a"])(k,x,T,!1,null,null,null)),P=R.exports;Object.keys(g).forEach((function(e){Object(_["c"])(e,g[e])})),Object(_["d"])("zh_TW",p),l["c"].add(m["b"]),l["c"].add(m["a"]),o["a"].use(s.a,a.a),o["a"].use(i["a"]),o["a"].use(E.a),o["a"].component("font-awesome-icon",d["a"]),o["a"].component("Loading",f.a),o["a"].component("ValidationProvider",_["b"]),o["a"].component("ValidationObserver",_["a"]),o["a"].config.productionTip=!1,o["a"].prototype.$liff=window.liff,new o["a"]({el:"#app",router:v,store:b,render:function(e){return e(P)}}),v.beforeEach((function(e,t,n){console.log(t,e),console.log("store "+b.state.is_loggedin),n()}))},"5c0b":function(e,t,n){"use strict";var o=n("9c0c"),i=n.n(o);i.a},"82d5":function(e,t,n){"use strict";var o=n("dccc"),i=n.n(o);i.a},"9c0c":function(e,t,n){},dccc:function(e,t,n){}});
//# sourceMappingURL=app.b38f3809.js.map