(function(t){function e(e){for(var o,i,c=e[0],s=e[1],u=e[2],l=0,f=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);d&&d(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(o=!1)}o&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},i={app:0},r={app:0},a=[];function c(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-2d0c8e41":"0ce28124","chunk-36812f0a":"f47b3b23","chunk-c308d21e":"ecc7942f"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-36812f0a":1,"chunk-c308d21e":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var o="css/"+({}[t]||t)+"."+{"chunk-2d0c8e41":"31d6cfe0","chunk-36812f0a":"ba49f6f8","chunk-c308d21e":"e97a4b84"}[t]+".css",r=s.p+o,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var u=a[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===o||l===r))return e()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){u=f[c],l=u.getAttribute("data-href");if(l===o||l===r)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var o=e&&e.target&&e.target.src||r,a=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete i[t],d.parentNode.removeChild(d),n(a)},d.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){i[t]=0})));var o=r[t];if(0!==o)if(o)e.push(o[2]);else{var a=new Promise((function(e,n){o=r[t]=[e,n]}));e.push(o[2]=a);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(t);var f=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(d);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;f.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",f.name="ChunkLoadError",f.type=o,f.request=i,n[1](f)}r[t]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/static/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var f=0;f<u.length;f++)e(u[f]);var d=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("4160"),n("b64b"),n("159b"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=n("2f62"),r=n("bc3a"),a=n.n(r),c=n("a7fe"),s=n.n(c),u=n("9062"),l=n.n(u),f=n("ecee"),d=n("ad3d"),m=n("f2d1"),_=n("7bb1"),p=n("60d4"),g=n("4c93"),h=(n("e40d"),n("77ed")),E=n.n(h),S=(n("4989"),n("d3b7"),n("8c4f"));o["a"].use(S["a"]);var O=new S["a"]({routes:[{path:"/login",name:"Login",component:function(){return n.e("chunk-2d0c8e41").then(n.bind(null,"578a"))}},{path:"/menu",name:"Menu",component:function(){return n.e("chunk-36812f0a").then(n.bind(null,"add6"))}},{path:"/404",name:"Page_404",component:function(){return n.e("chunk-c308d21e").then(n.bind(null,"9303"))}},{path:"*",name:"Unknow",redirect:{name:"Login"}}]});n("a434"),n("ac1f"),n("25f0"),n("3ca3"),n("5319"),n("ddb0"),n("2b3d");function v(){var t=Date.now();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}o["a"].use(i["a"]);var b=new i["a"].Store({state:{is_loading:!0,is_loggedin:!1,liff_context:null,user_profile:null,gid:"",uid:"",records:null,current_goods:[],order_status:"empty",messages:[]},actions:{set_is_loading:function(t,e){t.commit("SET_IS_LOADING",e)},set_is_loggedin:function(t,e){t.commit("SET_IS_LOGGEDIN",e)},set_gid:function(t,e){t.commit("SET_GID",e)},set_order_status:function(t,e){t.commit("SET_ORDER_STATUS",e)},add_good:function(t,e){e.id=v(),t.commit("ADD_GOOD",e)},remove_good:function(t,e){t.commit("REMOVE_GOOD",e)},goods_same_as:function(t,e){t.commit("GOODS_SAME_AS",e)},remove_all_goods:function(t){t.commit("REMOVE_ALL_GOODS")},add_message:function(t,e){var n=v();t.commit("ADD_MESSAGE",{message:e.message,status:e.status,timestamp:n});var o=this;setTimeout((function(){o.state.messages.forEach((function(e,o){e.timestamp===n&&t.commit("REMOVE_MESSAGE",o)}))}),5e3)},remove_message:function(t,e){t.commit("REMOVE_MESSAGE",e)},get_liff_context:function(t){t.commit("GET_LIFF_CONTEXT",window.liff.getContext()),null!==this.state.liff_context&&this.state.liff_context.hasOwnProperty("groupId")&&t.commit("SET_GID",this.state.liff_context.groupId),""===this.state.gid&&t.commit("SET_GID","test")},get_user_profile:function(t){window.liff.getProfile().then((function(e){t.commit("GET_USER_PROFILE",{display_name:e.displayName,photo_url:e.pictureUrl}),t.commit("SET_UID",e.userId)})).catch((function(t){console.log("error",t)}))},get_records:function(t){var e=this,n="https://only-test-0001.herokuapp.com/api/v1/",o=new URL(String(e.state.gid)+"/orders",n).toString();t.commit("SET_IS_LOADING",!0),a.a.get(o).then((function(n){var o=e.state.uid;t.commit("GET_RECORDS",n.data),n.data.hasOwnProperty(e.state.uid)?(t.commit("SET_ORDER_STATUS","exist"),t.commit("SET_GOODS",n.data[o].goods)):t.commit("SET_ORDER_STATUS","empty"),t.commit("SET_IS_LOADING",!1)})).catch((function(e){console.log(e),t.commit("SET_IS_LOADING",!1)}))}},mutations:{SET_IS_LOADING:function(t,e){t.is_loading=e},SET_IS_LOGGEDIN:function(t,e){t.is_loggedin=e},SET_UID:function(t,e){t.uid=e},SET_GID:function(t,e){t.gid=e},SET_ORDER_STATUS:function(t,e){t.order_status=e},ADD_GOOD:function(t,e){t.current_goods.push(e)},REMOVE_GOOD:function(t,e){t.current_goods.forEach((function(n,o){n.id===e&&t.current_goods.splice(o,1)}))},SET_GOODS:function(t,e){t.current_goods=JSON.parse(JSON.stringify(e))},GOODS_SAME_AS:function(t,e){t.current_goods.splice(0,t.current_goods.length),e.forEach((function(e){e.id=v(),t.current_goods.push(e)}))},REMOVE_ALL_GOODS:function(t){t.current_goods.splice(0,t.current_goods.length)},ADD_MESSAGE:function(t,e){t.messages.push({message:e.message,status:e.status,timestamp:e.timestamp})},REMOVE_MESSAGE:function(t,e){t.messages.splice(e,1)},GET_LIFF_CONTEXT:function(t,e){t.liff_context=e},GET_USER_PROFILE:function(t,e){t.user_profile=e},GET_RECORDS:function(t,e){t.records=e}}}),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container mt-3",attrs:{id:"app"}},[n("Alert",{attrs:{id:"msg",msg:"Ops~",state:"alert-danger"}}),t.initialized?n("router-view"):n("loading",{attrs:{loader:"dots",active:t.api_loading,"can-cancel":!1,"is-full-page":!1},on:{"update:active":function(e){t.api_loading=e}}})],1)},T=[],y=(n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"message-alert"},t._l(t.messages,(function(e,o){return n("div",{key:o,staticClass:"alert alert-dismissible",class:"alert-"+e.status},[t._v(" "+t._s(e.message)+" "),n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(o)}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])])})),0)}),D=[],A={name:"Alert",computed:{messages:function(){return this.$store.state.messages}},methods:{removeMessage:function(t){this.$store.dispatch("remove_message",t)}}},G=A,w=(n("82d5"),n("2877")),I=Object(w["a"])(G,y,D,!1,null,null,null),L=I.exports,M={name:"app",components:{Alert:L},data:function(){return{initialized:!1}},created:function(){console.log(this.$options.name,"created"),console.log("process.env.NODE_ENV: ".concat("production")),console.log("process.env.VUE_APP_LIFF_ID: ".concat("1602541695-bYKBPBe6")),this.init_liff()},BeforeMount:function(){console.log(this.$options.name,"BeforeMount")},beforeDestroy:function(){console.log(this.$options.name,"BeforeMount"),this.$liff.logout()},computed:{api_loading:function(){return this.$store.state.is_loading}},methods:{init_liff:function(){var t=this;t.$liff.init({liffId:"1602541695-bYKBPBe6"},(function(){t.$store.dispatch("get_liff_context"),t.$store.dispatch("set_is_loading",!1),t.initialized=!0}),(function(t){console.log("LIFF initialization failed",t)}))}}},k=M,R=(n("5c0b"),Object(w["a"])(k,x,T,!1,null,null,null)),P=R.exports;Object.keys(g).forEach((function(t){Object(_["c"])(t,g[t])})),Object(_["d"])("zh_TW",p),f["c"].add(m["b"]),f["c"].add(m["a"]),o["a"].use(s.a,a.a),o["a"].use(i["a"]),o["a"].use(E.a),o["a"].component("font-awesome-icon",d["a"]),o["a"].component("Loading",l.a),o["a"].component("ValidationProvider",_["b"]),o["a"].component("ValidationObserver",_["a"]),o["a"].config.productionTip=!1,o["a"].prototype.$liff=window.liff,new o["a"]({el:"#app",router:O,store:b,render:function(t){return t(P)}}),O.beforeEach((function(t,e,n){console.log(e,t),console.log("store "+b.state.is_loggedin),n()}))},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),i=n.n(o);i.a},"82d5":function(t,e,n){"use strict";var o=n("dccc"),i=n.n(o);i.a},"9c0c":function(t,e,n){},dccc:function(t,e,n){}});
//# sourceMappingURL=app.c757841a.js.map